{"ast":null,"code":"import _toConsumableArray from\"/Users/justin/Desktop/MEng Repos/ENSF 614/movie-ticket-system/react-frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"/Users/justin/Desktop/MEng Repos/ENSF 614/movie-ticket-system/react-frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import*as React from\"react\";import Box from\"@mui/material/Box\";import TextField from\"@mui/material/TextField\";import Container from\"@mui/material/Container\";import Paper from\"@mui/material/Paper\";import Button from\"@mui/material/Button\";import{useState,useEffect}from\"react\";import{flexbox}from\"@mui/system\";import{userInfo}from\"./Login.js\";import ListItemButton from'@mui/material/ListItemButton';import ListItemIcon from'@mui/material/ListItemIcon';import Checkbox from'@mui/material/Checkbox';import{globalTickets}from\"./Payment.js\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Account(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isError=_useState2[0],setIsError=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isSubmitted=_useState4[0],setIsSubmitted=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),checked=_useState6[0],setChecked=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),tickets=_useState8[0],setTickets=_useState8[1];var paperStyle={padding:\"50px 20px\",width:600,margin:\"20px auto\"};function sortByKey(array,key){return array.sort(function(a,b){var x=Number(a[key]);var y=Number(b[key]);return x<y?-1:x>y?1:0;});}useEffect(function(){fetch(\"http://localhost:8080/api/v1/registereduser/tickets\"+userInfo.email).then(function(res){return res.json();}).then(function(result){setTickets(sortByKey(JSON.parse(JSON.stringify(result)),\"id\"));});},[]);var handleDelete=function handleDelete(e){var id=[];for(var i=0;i<checked.length;i++){id.push(tickets[checked[i]].id);}console.log(id);for(var i=0;i<id.length;i++){fetch(\"http://localhost:8080/api/v1/ticket/delete/\"+id[i],{method:\"DELETE\",headers:{\"Content-Type\":\"application/json\"}}).then(function(){console.log(\"Ticket Deleted From User\");setIsSubmitted(true);setIsError(false);fetch(\"http://localhost:8080/api/v1/registereduser/tickets\"+userInfo.email).then(function(res){return res.json();}).then(function(result){setTickets(sortByKey(JSON.parse(JSON.stringify(result)),\"id\"));setChecked([]);});}).catch(function(){console.log(\"err2\");setIsError(true);setIsSubmitted(false);});}};var handleToggle=function handleToggle(value){return function(){var currentIndex=checked.indexOf(value);var newChecked=_toConsumableArray(checked);if(currentIndex===-1){newChecked.push(value);}else{newChecked.splice(currentIndex,1);}setChecked(newChecked);};};return/*#__PURE__*/_jsxs(Container,{children:[/*#__PURE__*/_jsxs(Paper,{elevation:3,style:paperStyle,children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Account Information\"}),/*#__PURE__*/_jsxs(Paper,{elevation:6,style:{margin:\"10px\",padding:\"15px\",textAlign:\"left\"},children:[\"ID:\",userInfo.id,\" \",/*#__PURE__*/_jsx(\"br\",{}),\"Email Address:\",userInfo.email,\" \",/*#__PURE__*/_jsx(\"br\",{}),\"Password:\",userInfo.password,\" \",/*#__PURE__*/_jsx(\"br\",{}),\"Name:\",userInfo.name,\" \",/*#__PURE__*/_jsx(\"br\",{}),\"Address:\",userInfo.address,\" \",/*#__PURE__*/_jsx(\"br\",{}),\"Date Registered:\",userInfo.dateRegistered,\" \",/*#__PURE__*/_jsx(\"br\",{})]})]}),/*#__PURE__*/_jsxs(Paper,{elevation:3,style:paperStyle,children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Tickets\"}),tickets.map(function(ticket,i){return/*#__PURE__*/_jsxs(ListItemButton,{role:undefined,onClick:handleToggle(i),dense:true,children:[/*#__PURE__*/_jsx(ListItemIcon,{children:/*#__PURE__*/_jsx(Checkbox,{edge:\"start\",checked:checked.indexOf(i)!==-1,tabIndex:-1,disableRipple:true})}),/*#__PURE__*/_jsxs(Paper,{elevation:6,style:{margin:\"10px\",padding:\"15px\",textAlign:\"left\"},children:[\"ID:\",ticket.id,\" \",/*#__PURE__*/_jsx(\"br\",{}),\"Theatre:\",ticket.theatre,\" \",/*#__PURE__*/_jsx(\"br\",{}),\"Movie:\",ticket.movie,\" \",/*#__PURE__*/_jsx(\"br\",{}),\"Showtime:\",ticket.showtime,\" \",/*#__PURE__*/_jsx(\"br\",{}),\"Seat:\",ticket.seatDesc]},ticket.id)]});}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(Box,{textAlign:\"center\",children:/*#__PURE__*/_jsx(Button,{variant:\"contained\",onClick:handleDelete,children:\"Delete\"})})]})]});}","map":{"version":3,"names":["React","Box","TextField","Container","Paper","Button","useState","useEffect","flexbox","userInfo","ListItemButton","ListItemIcon","Checkbox","globalTickets","Account","isError","setIsError","isSubmitted","setIsSubmitted","checked","setChecked","tickets","setTickets","paperStyle","padding","width","margin","sortByKey","array","key","sort","a","b","x","Number","y","fetch","email","then","res","json","result","JSON","parse","stringify","handleDelete","e","id","i","length","push","console","log","method","headers","catch","handleToggle","value","currentIndex","indexOf","newChecked","splice","textAlign","password","name","address","dateRegistered","map","ticket","undefined","theatre","movie","showtime","seatDesc"],"sources":["/Users/justin/Desktop/MEng Repos/ENSF 614/movie-ticket-system/react-frontend/src/containers/Account.js"],"sourcesContent":["import * as React from \"react\";\nimport Box from \"@mui/material/Box\";\nimport TextField from \"@mui/material/TextField\";\nimport Container from \"@mui/material/Container\";\nimport Paper from \"@mui/material/Paper\";\nimport Button from \"@mui/material/Button\";\nimport { useState, useEffect } from \"react\";\nimport { flexbox } from \"@mui/system\";\nimport { userInfo } from \"./Login.js\";\nimport ListItemButton from '@mui/material/ListItemButton';\nimport ListItemIcon from '@mui/material/ListItemIcon';\nimport Checkbox from '@mui/material/Checkbox';\nimport { globalTickets } from \"./Payment.js\";\n\nexport default function Account() {\n\tconst [isError, setIsError] = useState(false);\n\tconst [isSubmitted, setIsSubmitted] = useState(false);\n\tconst [checked, setChecked] = useState([]);\n\tconst [tickets,setTickets] = useState([])\n\n\tconst paperStyle = {\n\t\tpadding: \"50px 20px\",\n\t\twidth: 600,\n\t\tmargin: \"20px auto\",\n\t};\n\n\tfunction sortByKey(array, key) {\n\t\treturn array.sort(function (a, b) {\n\t\t\tvar x = Number(a[key]);\n\t\t\tvar y = Number(b[key]);\n\t\t\treturn x < y ? -1 : x > y ? 1 : 0;\n\t\t});\n\t}\n\t\n\tuseEffect(()=>{\n\t\tfetch(\"http://localhost:8080/api/v1/registereduser/tickets\"+userInfo.email)\n\t\t.then(res=>res.json())\n\t\t.then(result=>{\n\t\t  setTickets(sortByKey(JSON.parse(JSON.stringify(result)), \"id\"));\n\t\t})\n\t  },[])\n\n\tconst handleDelete = (e) => {\n\t\tconst id = [];\n\t\tfor (var i = 0; i < checked.length; i++) {\n\t\t\tid.push(tickets[checked[i]].id);\n\t\t}\n\t\tconsole.log(id)\n\n\t\tfor (var i = 0; i < id.length; i++) {\n\t\tfetch(\"http://localhost:8080/api/v1/ticket/delete/\"+id[i], {\n\t\t\tmethod: \"DELETE\",\n\t\t\theaders: { \"Content-Type\": \"application/json\" }\n\t\t\t})\n\t\t\t.then(() => {\n\t\t\t\tconsole.log(\"Ticket Deleted From User\");\n\t\t\t\tsetIsSubmitted(true);\n\t\t\t\tsetIsError(false);\n\t\t\t\tfetch(\"http://localhost:8080/api/v1/registereduser/tickets\"+userInfo.email)\n\t\t\t\t.then(res=>res.json())\n\t\t\t\t.then(result=>{\n\t\t\t\t\tsetTickets(sortByKey(JSON.parse(JSON.stringify(result)), \"id\"));\n\t\t\t\t\tsetChecked([]);\n\t\t\t\t})\n\t\t\t})\n\t\t\t.catch(() => {\n\t\t\t\tconsole.log(\"err2\");\n\t\t\t\tsetIsError(true);\n\t\t\t\tsetIsSubmitted(false);\n\t\t\t})\n\t\t\t}\n\t};\n\n\tconst handleToggle = (value) => () => {\n\t\tconst currentIndex = checked.indexOf(value);\n\t\tconst newChecked = [...checked];\n\t\tif (currentIndex === -1) {\n\t\t  newChecked.push(value);\n\t\t} else {\n\t\t  newChecked.splice(currentIndex, 1);\n\t\t}\n\t\tsetChecked(newChecked);\n\t  };\n\n\treturn (\n\t\t<Container>\n\t\t\t<Paper elevation={3} style={paperStyle}>\n\t\t\t<h1>Account Information</h1>\n\t\t\t\t<Paper elevation={6} style={{margin:\"10px\",padding:\"15px\",textAlign:\"left\"}} >\n\t\t\t\t\tID:{userInfo.id} <br></br>\n\t\t\t\t\tEmail Address:{userInfo.email} <br></br>\n\t\t\t\t\tPassword:{userInfo.password} <br></br>\n\t\t\t\t\tName:{userInfo.name} <br></br>\n\t\t\t\t\tAddress:{userInfo.address} <br></br>\n\t\t\t\t\tDate Registered:{userInfo.dateRegistered} <br></br>\n\t\t\t\t</Paper>\n\t\t\t</Paper>\n\n\t\t\t<Paper elevation={3} style={paperStyle}>\n\t\t\t<h1>Tickets</h1>\n\t\t\t{tickets.map((ticket,i) =>(\n\t\t\t\t<ListItemButton role={undefined} onClick={handleToggle(i)} dense>\n\t\t\t\t<ListItemIcon>\n\t\t\t\t\t<Checkbox\n\t\t\t\t\t  edge=\"start\"\n\t\t\t\t\t  checked={checked.indexOf(i) !== -1}\n\t\t\t\t\t  tabIndex={-1}\n\t\t\t\t\t  disableRipple\n\t\t\t\t\t/>\n\t\t\t\t  </ListItemIcon>\n\t\t\t\t<Paper elevation={6} style={{margin:\"10px\",padding:\"15px\",textAlign:\"left\"}} key={ticket.id}>\n\t\t\t\t\tID:{ticket.id} <br></br>\n\t\t\t\t\tTheatre:{ticket.theatre} <br></br>\n\t\t\t\t\tMovie:{ticket.movie} <br></br>\n\t\t\t\t\tShowtime:{ticket.showtime} <br></br>\n\t\t\t\t\tSeat:{ticket.seatDesc}\n\t\t\t\t</Paper>\n\t\t\t\t</ListItemButton>\n\t\t\t))}\n\t\t\t<br></br>\n          <Box textAlign='center'>\n            <Button variant=\"contained\" onClick={handleDelete}>\n              Delete\n            </Button>\n          </Box>\n\t\t\t</Paper>\n\t\t</Container>\n\t);\n}\n"],"mappings":"4UAAA,MAAO,GAAKA,MAAK,KAAM,OAAO,CAC9B,MAAOC,IAAG,KAAM,mBAAmB,CACnC,MAAOC,UAAS,KAAM,yBAAyB,CAC/C,MAAOC,UAAS,KAAM,yBAAyB,CAC/C,MAAOC,MAAK,KAAM,qBAAqB,CACvC,MAAOC,OAAM,KAAM,sBAAsB,CACzC,OAASC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAC3C,OAASC,OAAO,KAAQ,aAAa,CACrC,OAASC,QAAQ,KAAQ,YAAY,CACrC,MAAOC,eAAc,KAAM,8BAA8B,CACzD,MAAOC,aAAY,KAAM,4BAA4B,CACrD,MAAOC,SAAQ,KAAM,wBAAwB,CAC7C,OAASC,aAAa,KAAQ,cAAc,CAAC,wFAE7C,cAAe,SAASC,QAAO,EAAG,CACjC,cAA8BR,QAAQ,CAAC,KAAK,CAAC,wCAAtCS,OAAO,eAAEC,UAAU,eAC1B,eAAsCV,QAAQ,CAAC,KAAK,CAAC,yCAA9CW,WAAW,eAAEC,cAAc,eAClC,eAA8BZ,QAAQ,CAAC,EAAE,CAAC,yCAAnCa,OAAO,eAAEC,UAAU,eAC1B,eAA6Bd,QAAQ,CAAC,EAAE,CAAC,yCAAlCe,OAAO,eAACC,UAAU,eAEzB,GAAMC,WAAU,CAAG,CAClBC,OAAO,CAAE,WAAW,CACpBC,KAAK,CAAE,GAAG,CACVC,MAAM,CAAE,WACT,CAAC,CAED,QAASC,UAAS,CAACC,KAAK,CAAEC,GAAG,CAAE,CAC9B,MAAOD,MAAK,CAACE,IAAI,CAAC,SAAUC,CAAC,CAAEC,CAAC,CAAE,CACjC,GAAIC,EAAC,CAAGC,MAAM,CAACH,CAAC,CAACF,GAAG,CAAC,CAAC,CACtB,GAAIM,EAAC,CAAGD,MAAM,CAACF,CAAC,CAACH,GAAG,CAAC,CAAC,CACtB,MAAOI,EAAC,CAAGE,CAAC,CAAG,CAAC,CAAC,CAAGF,CAAC,CAAGE,CAAC,CAAG,CAAC,CAAG,CAAC,CAClC,CAAC,CAAC,CACH,CAEA5B,SAAS,CAAC,UAAI,CACb6B,KAAK,CAAC,qDAAqD,CAAC3B,QAAQ,CAAC4B,KAAK,CAAC,CAC1EC,IAAI,CAAC,SAAAC,GAAG,QAAEA,IAAG,CAACC,IAAI,EAAE,GAAC,CACrBF,IAAI,CAAC,SAAAG,MAAM,CAAE,CACZnB,UAAU,CAACK,SAAS,CAACe,IAAI,CAACC,KAAK,CAACD,IAAI,CAACE,SAAS,CAACH,MAAM,CAAC,CAAC,CAAE,IAAI,CAAC,CAAC,CACjE,CAAC,CAAC,CACD,CAAC,CAAC,EAAE,CAAC,CAEP,GAAMI,aAAY,CAAG,QAAfA,aAAY,CAAIC,CAAC,CAAK,CAC3B,GAAMC,GAAE,CAAG,EAAE,CACb,IAAK,GAAIC,EAAC,CAAG,CAAC,CAAEA,CAAC,CAAG7B,OAAO,CAAC8B,MAAM,CAAED,CAAC,EAAE,CAAE,CACxCD,EAAE,CAACG,IAAI,CAAC7B,OAAO,CAACF,OAAO,CAAC6B,CAAC,CAAC,CAAC,CAACD,EAAE,CAAC,CAChC,CACAI,OAAO,CAACC,GAAG,CAACL,EAAE,CAAC,CAEf,IAAK,GAAIC,EAAC,CAAG,CAAC,CAAEA,CAAC,CAAGD,EAAE,CAACE,MAAM,CAAED,CAAC,EAAE,CAAE,CACpCZ,KAAK,CAAC,6CAA6C,CAACW,EAAE,CAACC,CAAC,CAAC,CAAE,CAC1DK,MAAM,CAAE,QAAQ,CAChBC,OAAO,CAAE,CAAE,cAAc,CAAE,kBAAmB,CAC9C,CAAC,CAAC,CACDhB,IAAI,CAAC,UAAM,CACXa,OAAO,CAACC,GAAG,CAAC,0BAA0B,CAAC,CACvClC,cAAc,CAAC,IAAI,CAAC,CACpBF,UAAU,CAAC,KAAK,CAAC,CACjBoB,KAAK,CAAC,qDAAqD,CAAC3B,QAAQ,CAAC4B,KAAK,CAAC,CAC1EC,IAAI,CAAC,SAAAC,GAAG,QAAEA,IAAG,CAACC,IAAI,EAAE,GAAC,CACrBF,IAAI,CAAC,SAAAG,MAAM,CAAE,CACbnB,UAAU,CAACK,SAAS,CAACe,IAAI,CAACC,KAAK,CAACD,IAAI,CAACE,SAAS,CAACH,MAAM,CAAC,CAAC,CAAE,IAAI,CAAC,CAAC,CAC/DrB,UAAU,CAAC,EAAE,CAAC,CACf,CAAC,CAAC,CACH,CAAC,CAAC,CACDmC,KAAK,CAAC,UAAM,CACZJ,OAAO,CAACC,GAAG,CAAC,MAAM,CAAC,CACnBpC,UAAU,CAAC,IAAI,CAAC,CAChBE,cAAc,CAAC,KAAK,CAAC,CACtB,CAAC,CAAC,CACF,CACF,CAAC,CAED,GAAMsC,aAAY,CAAG,QAAfA,aAAY,CAAIC,KAAK,QAAK,WAAM,CACrC,GAAMC,aAAY,CAAGvC,OAAO,CAACwC,OAAO,CAACF,KAAK,CAAC,CAC3C,GAAMG,WAAU,oBAAOzC,OAAO,CAAC,CAC/B,GAAIuC,YAAY,GAAK,CAAC,CAAC,CAAE,CACvBE,UAAU,CAACV,IAAI,CAACO,KAAK,CAAC,CACxB,CAAC,IAAM,CACLG,UAAU,CAACC,MAAM,CAACH,YAAY,CAAE,CAAC,CAAC,CACpC,CACAtC,UAAU,CAACwC,UAAU,CAAC,CACrB,CAAC,GAEH,mBACC,MAAC,SAAS,yBACT,MAAC,KAAK,EAAC,SAAS,CAAE,CAAE,CAAC,KAAK,CAAErC,UAAW,wBACvC,2CAA4B,cAC3B,MAAC,KAAK,EAAC,SAAS,CAAE,CAAE,CAAC,KAAK,CAAE,CAACG,MAAM,CAAC,MAAM,CAACF,OAAO,CAAC,MAAM,CAACsC,SAAS,CAAC,MAAM,CAAE,iBACvErD,QAAQ,CAACsC,EAAE,kBAAE,aAAS,kBACXtC,QAAQ,CAAC4B,KAAK,kBAAE,aAAS,aAC9B5B,QAAQ,CAACsD,QAAQ,kBAAE,aAAS,SAChCtD,QAAQ,CAACuD,IAAI,kBAAE,aAAS,YACrBvD,QAAQ,CAACwD,OAAO,kBAAE,aAAS,oBACnBxD,QAAQ,CAACyD,cAAc,kBAAE,aAAS,GAC5C,GACD,cAER,MAAC,KAAK,EAAC,SAAS,CAAE,CAAE,CAAC,KAAK,CAAE3C,UAAW,wBACvC,+BAAgB,CACfF,OAAO,CAAC8C,GAAG,CAAC,SAACC,MAAM,CAACpB,CAAC,qBACrB,MAAC,cAAc,EAAC,IAAI,CAAEqB,SAAU,CAAC,OAAO,CAAEb,YAAY,CAACR,CAAC,CAAE,CAAC,KAAK,6BAChE,KAAC,YAAY,wBACZ,KAAC,QAAQ,EACP,IAAI,CAAC,OAAO,CACZ,OAAO,CAAE7B,OAAO,CAACwC,OAAO,CAACX,CAAC,CAAC,GAAK,CAAC,CAAE,CACnC,QAAQ,CAAE,CAAC,CAAE,CACb,aAAa,OACb,EACc,cACjB,MAAC,KAAK,EAAC,SAAS,CAAE,CAAE,CAAC,KAAK,CAAE,CAACtB,MAAM,CAAC,MAAM,CAACF,OAAO,CAAC,MAAM,CAACsC,SAAS,CAAC,MAAM,CAAE,iBACvEM,MAAM,CAACrB,EAAE,kBAAE,aAAS,YACfqB,MAAM,CAACE,OAAO,kBAAE,aAAS,UAC3BF,MAAM,CAACG,KAAK,kBAAE,aAAS,aACpBH,MAAM,CAACI,QAAQ,kBAAE,aAAS,SAC9BJ,MAAM,CAACK,QAAQ,GAL4DL,MAAM,CAACrB,EAAE,CAMnF,GACS,EACjB,CAAC,cACF,aAAS,cACF,KAAC,GAAG,EAAC,SAAS,CAAC,QAAQ,uBACrB,KAAC,MAAM,EAAC,OAAO,CAAC,WAAW,CAAC,OAAO,CAAEF,YAAa,oBAEzC,EACL,GACL,GACG,CAEd"},"metadata":{},"sourceType":"module","externalDependencies":[]}