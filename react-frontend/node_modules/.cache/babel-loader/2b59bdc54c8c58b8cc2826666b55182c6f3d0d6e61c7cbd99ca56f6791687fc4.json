{"ast":null,"code":"import _slicedToArray from\"/Users/justin/Desktop/MEng Repos/ENSF 614/movie-ticket-system/react-frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from\"react\";import{useAppContext}from\"../lib/contextLib\";import{useNavigate}from\"react-router-dom\";import Button from'@mui/material/Button';import\"./Signup.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Signup(){var nav=useNavigate();// React States\nvar _useState=useState(false),_useState2=_slicedToArray(_useState,2),isError=_useState2[0],setIsError=_useState2[1];var _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),errorMessages=_useState4[0],setErrorMessages=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isSubmitted=_useState6[0],setIsSubmitted=_useState6[1];var _useAppContext=useAppContext(),userHasAuthenticated=_useAppContext.userHasAuthenticated;var _useState7=useState(),_useState8=_slicedToArray(_useState7,2),userDB=_useState8[0],setUserDB=_useState8[1];var errors={uname:\"email address already exists\",pass:\"invalid password\"};useEffect(function(){// get registered users\nfetch(\"http://localhost:8080/api/v1/registereduser/all\",{method:\"GET\",headers:{\"Content-Type\":\"application/json\"}}).then(function(response){return response.json();}).then(function(data){setUserDB(data);}).catch(function(){console.log(\"Error\");});},[]);var handleSubmit=function handleSubmit(event){//Prevent page reload\nevent.preventDefault();var _document$forms$=document.forms[0],uname=_document$forms$.uname,pass=_document$forms$.pass,nme=_document$forms$.nme,addr=_document$forms$.addr,ccv=_document$forms$.ccv,crdnum=_document$forms$.crdnum,expir=_document$forms$.expir;// Find user login info\nvar userData=userDB===null||userDB===void 0?void 0:userDB.find(function(user){return user.email===uname.value;});// Compare user info\nif(userData){// Email found\nsetErrorMessages({name:\"uname\",message:errors.uname});console.log(\"Error. Email Address Exists.\");}else{// Email not found\nvar newUser={email:uname.value,password:pass.value,name:nme.value,address:addr.value,ccv:ccv.value,cardNo:crdnum.value,expiry:expir.value,accountBalance:100};console.log(newUser);fetch(\"http://localhost:8080/api/v1/registereduser/add\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(newUser)}).then(function(){console.log(newUser);console.log(\"New User Added\");setIsSubmitted(true);setIsError(false);}).catch(function(){console.log(\"Error\");setIsError(true);setIsSubmitted(false);});}};// Generate JSX code for error message\nvar renderErrorMessage=function renderErrorMessage(name){return name===errorMessages.name&&/*#__PURE__*/_jsx(\"div\",{className:\"error\",children:errorMessages.message});};// JSX code for login form\nvar renderForm=/*#__PURE__*/_jsx(\"div\",{className:\"form\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"input-container\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Email Address \"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"uname\",required:true}),renderErrorMessage(\"uname\")]}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-container\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Password \"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"pass\",required:true}),renderErrorMessage(\"pass\")]}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-container\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Name \"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"nme\",required:true}),renderErrorMessage(\"nme\")]}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-container\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Address \"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"addr\",required:true}),renderErrorMessage(\"addr\")]}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-container\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"CCV \"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"ccv\",required:true}),renderErrorMessage(\"nme\")]}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-container\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"CardNumber \"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"crdnum\",required:true}),renderErrorMessage(\"nme\")]}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-container\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Expiry \"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"expir\",required:true}),renderErrorMessage(\"nme\")]}),/*#__PURE__*/_jsx(\"div\",{className:\"button-container\",children:/*#__PURE__*/_jsx(Button,{variant:\"contained\",onClick:handleSubmit,children:\"Submit\"})})]})});return/*#__PURE__*/_jsx(\"div\",{className:\"app\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"login-form\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"title\",children:\"Sign Up\"}),isSubmitted?/*#__PURE__*/_jsx(\"div\",{children:\"You've successfully signed up! Please login.\"}):renderForm]})});}","map":{"version":3,"names":["React","useState","useEffect","useAppContext","useNavigate","Button","Signup","nav","isError","setIsError","errorMessages","setErrorMessages","isSubmitted","setIsSubmitted","userHasAuthenticated","userDB","setUserDB","errors","uname","pass","fetch","method","headers","then","response","json","data","catch","console","log","handleSubmit","event","preventDefault","document","forms","nme","addr","ccv","crdnum","expir","userData","find","user","email","value","name","message","newUser","password","address","cardNo","expiry","accountBalance","body","JSON","stringify","renderErrorMessage","renderForm"],"sources":["/Users/justin/Desktop/MEng Repos/ENSF 614/movie-ticket-system/react-frontend/src/containers/Signup.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { useAppContext } from \"../lib/contextLib\";\nimport { useNavigate } from \"react-router-dom\";\nimport Button from '@mui/material/Button';\nimport \"./Signup.css\";\n\nexport default function Signup() {\n  const nav = useNavigate();\n\n  // React States\n  const [isError, setIsError] = useState(false);\n  const [errorMessages, setErrorMessages] = useState({});\n  const [isSubmitted, setIsSubmitted] = useState(false);\n  const { userHasAuthenticated } = useAppContext();\n\n  const [userDB, setUserDB] = useState();\n\n  const errors = {\n    uname: \"email address already exists\",\n    pass: \"invalid password\"\n  };\n\n  useEffect(() => {\n\t\t// get registered users\n    fetch(\"http://localhost:8080/api/v1/registereduser/all\", {\n\t\t\tmethod: \"GET\",\n\t\t\theaders: { \"Content-Type\": \"application/json\" },\n      })\n        .then((response) => {\n          return response.json();\n        })\n        .then((data) => {\n          setUserDB(data);\n        })\n        .catch(() => {\n          console.log(\"Error\");\n        });\n\t}, []);\n\n  const handleSubmit = (event) => {\n      //Prevent page reload\n      event.preventDefault();\n\n      var { uname, pass, nme, addr, ccv, crdnum, expir } = document.forms[0];\n\n      // Find user login info\n      const userData = userDB?.find((user) => user.email === uname.value);\n\n      // Compare user info\n      if (userData) {\n        // Email found\n        setErrorMessages({ name: \"uname\", message: errors.uname });\n        console.log(\"Error. Email Address Exists.\");\n      } else {\n        // Email not found\n        const newUser = {\n          email: uname.value,\n          password: pass.value,\n          name: nme.value,\n          address: addr.value,\n          ccv: ccv.value,\n          cardNo: crdnum.value,\n          expiry: expir.value,\n          accountBalance: 100\n        };\n        console.log(newUser);\n        fetch(\"http://localhost:8080/api/v1/registereduser/add\", {\n          method: \"POST\",\n          headers: { \"Content-Type\": \"application/json\" },\n          body: JSON.stringify(newUser),\n        })\n          .then(() => {\n            console.log(newUser);\n            console.log(\"New User Added\");\n            setIsSubmitted(true);\n            setIsError(false);\n          })\n          .catch(() => {\n            console.log(\"Error\");\n            setIsError(true);\n            setIsSubmitted(false);\n          });\n      }\n  };\n\n  // Generate JSX code for error message\n  const renderErrorMessage = (name) =>\n    name === errorMessages.name && (\n      <div className=\"error\">{errorMessages.message}</div>\n  );\n\n  // JSX code for login form\n  const renderForm = (\n    <div className=\"form\">\n      <form onSubmit={handleSubmit}>\n        <div className=\"input-container\">\n          <label>Email Address </label>\n          <input type=\"text\" name=\"uname\" required />\n          {renderErrorMessage(\"uname\")}\n        </div>\n        <div className=\"input-container\">\n          <label>Password </label>\n          <input type=\"password\" name=\"pass\" required />\n          {renderErrorMessage(\"pass\")}\n        </div>\n        <div className=\"input-container\">\n          <label>Name </label>\n          <input type=\"text\" name=\"nme\" required />\n          {renderErrorMessage(\"nme\")}\n        </div>\n        <div className=\"input-container\">\n          <label>Address </label>\n          <input type=\"text\" name=\"addr\" required />\n          {renderErrorMessage(\"addr\")}\n        </div>\n        <div className=\"input-container\">\n          <label>CCV </label>\n          <input type=\"text\" name=\"ccv\" required />\n          {renderErrorMessage(\"nme\")}\n        </div>\n        <div className=\"input-container\">\n          <label>CardNumber </label>\n          <input type=\"text\" name=\"crdnum\" required />\n          {renderErrorMessage(\"nme\")}\n        </div>\n        <div className=\"input-container\">\n          <label>Expiry </label>\n          <input type=\"text\" name=\"expir\" required />\n          {renderErrorMessage(\"nme\")}\n        </div>\n        <div className=\"button-container\">\n        <Button variant=\"contained\" onClick={handleSubmit}>\n          Submit\n        </Button>\n        </div>\n      </form>\n    </div>\n  );\n\n  return (\n    <div className=\"app\">\n      <div className=\"login-form\">\n        <div className=\"title\">Sign Up</div>\n        {isSubmitted ? <div>You've successfully signed up! Please login.</div> : renderForm}\n      </div>\n    </div>\n  );\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}