{"ast":null,"code":"import _toConsumableArray from\"/Users/justin/Desktop/MEng Repos/ENSF 614/movie-ticket-system/react-frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"/Users/justin/Desktop/MEng Repos/ENSF 614/movie-ticket-system/react-frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import'./Seats2.css';import React,{useState}from'react';import clsx from'clsx';import Button from'@mui/material/Button';import{useNavigate}from\"react-router-dom\";import{theatreSelected}from\"./Theatres.js\";import{movieSelected}from\"./Movies.js\";import{stSelected}from\"./Showtimes.js\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var s='test';var p=10.00;var movies=[{name:'Avenger',price:10,occupied:[20,21,30,1,2,8]},{name:'Joker',price:12,occupied:[9,41,35,11,65,26]},{name:'Toy story',price:8,occupied:[37,25,44,13,2,3]},{name:'the lion king',price:9,occupied:[10,12,50,33,28,47]}];var seats=Array.from({length:8*8},function(_,i){return i;});export default function Seats2(){var nav=useNavigate();var _useState=useState(movies[0]),_useState2=_slicedToArray(_useState,2),selectedMovie=_useState2[0],setSelectedMovie=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),selectedSeats=_useState4[0],setSelectedSeats=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isError=_useState6[0],setIsError=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),isSubmitted=_useState8[0],setIsSubmitted=_useState8[1];var handleClick=function handleClick(e){e.preventDefault();var ticket={theatre:theatreSelected,movie:movieSelected,showtime:stSelected,seat:s,price:p};console.log(ticket);// TODO: send data to database\nfetch(\"http://localhost:8080/api/v1/ticket/add\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(ticket)}).then(function(){console.log(ticket);console.log(\"Ticket Created\");setIsSubmitted(true);setIsError(false);}).catch(function(){console.log(\"Error\");setIsError(true);setIsSubmitted(false);});nav(\"/movie-ticket-system/payment\");};return/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsx(Movies,{movie:selectedMovie,onChange:function onChange(movie){setSelectedSeats([]);setSelectedMovie(movie);}}),/*#__PURE__*/_jsx(ShowCase,{}),/*#__PURE__*/_jsx(Cinema,{movie:selectedMovie,selectedSeats:selectedSeats,onSelectedSeatsChange:function onSelectedSeatsChange(selectedSeats){return setSelectedSeats(selectedSeats);}}),/*#__PURE__*/_jsxs(\"p\",{className:\"info\",children:[\"You have selected \",/*#__PURE__*/_jsx(\"span\",{className:\"count\",children:selectedSeats.length}),' ',\"seats for the price of\",' ',/*#__PURE__*/_jsxs(\"span\",{className:\"total\",children:[selectedSeats.length*selectedMovie.price,\"$\"]})]}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",onClick:handleClick,children:\"Submit\"})]});}function Movies(_ref){var movie=_ref.movie,onChange=_ref.onChange;}// return (\n//   <div className=\"Movies\">\n//     <label htmlFor=\"movie\">Pick a movie</label>\n//     <select\n//       id=\"movie\"\n//       value={movie.name}\n//       onChange={e => {\n//         onChange(movies.find(movie => movie.name === e.target.value))\n//       }}\n//     >\n//       {movies.map(movie => (\n//         <option key={movie.name} value={movie.name}>\n//           {movie.name} (${movie.price})\n//         </option>\n//       ))}\n//     </select>\n//   </div>\n// )\nfunction ShowCase(){return/*#__PURE__*/_jsxs(\"ul\",{className:\"ShowCase\",children:[/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"seat\"}),\" \",/*#__PURE__*/_jsx(\"small\",{children:\"N/A\"})]}),/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"seat selected\"}),\" \",/*#__PURE__*/_jsx(\"small\",{children:\"Selected\"})]}),/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"seat occupied\"}),\" \",/*#__PURE__*/_jsx(\"small\",{children:\"Occupied\"})]})]});}function Cinema(_ref2){var movie=_ref2.movie,selectedSeats=_ref2.selectedSeats,onSelectedSeatsChange=_ref2.onSelectedSeatsChange;function handleSelectedState(seat){var isSelected=selectedSeats.includes(seat);if(isSelected){onSelectedSeatsChange(selectedSeats.filter(function(selectedSeat){return selectedSeat!==seat;}));}else{onSelectedSeatsChange([].concat(_toConsumableArray(selectedSeats),[seat]));}}return/*#__PURE__*/_jsxs(\"div\",{className:\"Cinema\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"screen\"}),/*#__PURE__*/_jsx(\"div\",{className:\"seats\",children:seats.map(function(seat){var isSelected=selectedSeats.includes(seat);var isOccupied=movie.occupied.includes(seat);return/*#__PURE__*/_jsx(\"span\",{tabIndex:\"0\",className:clsx('seat',isSelected&&'selected',isOccupied&&'occupied'),onClick:isOccupied?null:function(){return handleSelectedState(seat);},onKeyPress:isOccupied?null:function(e){if(e.key==='Enter'){handleSelectedState(seat);}}},seat);})})]});}","map":{"version":3,"names":["React","useState","clsx","Button","useNavigate","theatreSelected","movieSelected","stSelected","s","p","movies","name","price","occupied","seats","Array","from","length","_","i","Seats2","nav","selectedMovie","setSelectedMovie","selectedSeats","setSelectedSeats","isError","setIsError","isSubmitted","setIsSubmitted","handleClick","e","preventDefault","ticket","theatre","movie","showtime","seat","console","log","fetch","method","headers","body","JSON","stringify","then","catch","Movies","onChange","ShowCase","Cinema","onSelectedSeatsChange","handleSelectedState","isSelected","includes","filter","selectedSeat","map","isOccupied","key"],"sources":["/Users/justin/Desktop/MEng Repos/ENSF 614/movie-ticket-system/react-frontend/src/containers/Seats2.js"],"sourcesContent":["import './Seats2.css'\nimport React, { useState } from 'react'\nimport clsx from 'clsx'\nimport Button from '@mui/material/Button';\nimport { useNavigate } from \"react-router-dom\";\nimport { theatreSelected } from \"./Theatres.js\";\nimport { movieSelected } from \"./Movies.js\";\nimport { stSelected } from \"./Showtimes.js\";\nconst s= 'test'\nconst p=10.00\n\nconst movies = [\n  {\n    name: 'Avenger',\n    price: 10,\n    occupied: [20, 21, 30, 1, 2, 8],\n  },\n  {\n    name: 'Joker',\n    price: 12,\n    occupied: [9, 41, 35, 11, 65, 26],\n  },\n  {\n    name: 'Toy story',\n    price: 8,\n    occupied: [37, 25, 44, 13, 2, 3],\n  },\n  {\n    name: 'the lion king',\n    price: 9,\n    occupied: [10, 12, 50, 33, 28, 47],\n  },\n]\n\nconst seats = Array.from({ length: 8 * 8 }, (_, i) => i)\n\nexport default function Seats2() {\n    const nav = useNavigate();\n  const [selectedMovie, setSelectedMovie] = useState(movies[0])\n  const [selectedSeats, setSelectedSeats] = useState([])\n  const [isError, setIsError] = useState(false);\n  const [isSubmitted, setIsSubmitted] = useState(false);\n\n  const handleClick=(e)=>{\n    e.preventDefault()\n    const ticket={\n      theatre: theatreSelected, \n      movie: movieSelected, \n      showtime: stSelected, \n      seat: s, \n      price: p}\n    console.log(ticket)\n    // TODO: send data to database\n    fetch(\"http://localhost:8080/api/v1/ticket/add\", {\n          method: \"POST\",\n          headers: { \"Content-Type\": \"application/json\" },\n          body: JSON.stringify(ticket),\n        })\n          .then(() => {\n            console.log(ticket);\n            console.log(\"Ticket Created\");\n            setIsSubmitted(true);\n            setIsError(false);\n          })\n          .catch(() => {\n            console.log(\"Error\");\n            setIsError(true);\n            setIsSubmitted(false);\n          });\n\n    nav(\"/movie-ticket-system/payment\");\n  }\n\n  return (\n    <div className=\"App\">\n      <Movies\n        movie={selectedMovie}\n        onChange={movie => {\n          setSelectedSeats([])\n          setSelectedMovie(movie)\n        }}\n      />\n      <ShowCase />\n      <Cinema\n        movie={selectedMovie}\n        selectedSeats={selectedSeats}\n        onSelectedSeatsChange={selectedSeats => setSelectedSeats(selectedSeats)}\n      />\n\n      <p className=\"info\">\n        You have selected <span className=\"count\">{selectedSeats.length}</span>{' '}\n        seats for the price of{' '}\n        <span className=\"total\">\n          {selectedSeats.length * selectedMovie.price}$\n        </span>\n      </p>\n      <Button variant=\"contained\" onClick={handleClick}>\n        Submit\n      </Button>\n    </div>\n  )\n}\n\nfunction Movies({ movie, onChange }) {\n  // return (\n  //   <div className=\"Movies\">\n  //     <label htmlFor=\"movie\">Pick a movie</label>\n  //     <select\n  //       id=\"movie\"\n  //       value={movie.name}\n  //       onChange={e => {\n  //         onChange(movies.find(movie => movie.name === e.target.value))\n  //       }}\n  //     >\n  //       {movies.map(movie => (\n  //         <option key={movie.name} value={movie.name}>\n  //           {movie.name} (${movie.price})\n  //         </option>\n  //       ))}\n  //     </select>\n  //   </div>\n  // )\n}\n\nfunction ShowCase() {\n  return (\n    <ul className=\"ShowCase\">\n      <li>\n        <span className=\"seat\" /> <small>N/A</small>\n      </li>\n      <li>\n        <span className=\"seat selected\" /> <small>Selected</small>\n      </li>\n      <li>\n        <span className=\"seat occupied\" /> <small>Occupied</small>\n      </li>\n    </ul>\n  )\n}\n\nfunction Cinema({ movie, selectedSeats, onSelectedSeatsChange }) {\n  function handleSelectedState(seat) {\n    const isSelected = selectedSeats.includes(seat)\n    if (isSelected) {\n      onSelectedSeatsChange(\n        selectedSeats.filter(selectedSeat => selectedSeat !== seat),\n      )\n    } else {\n      onSelectedSeatsChange([...selectedSeats, seat])\n    }\n  }\n\n  return (\n    <div className=\"Cinema\">\n      <div className=\"screen\" />\n\n      <div className=\"seats\">\n        {seats.map(seat => {\n          const isSelected = selectedSeats.includes(seat)\n          const isOccupied = movie.occupied.includes(seat)\n          return (\n            <span\n              tabIndex=\"0\"\n              key={seat}\n              className={clsx(\n                'seat',\n                isSelected && 'selected',\n                isOccupied && 'occupied',\n              )}\n              onClick={isOccupied ? null : () => handleSelectedState(seat)}\n              onKeyPress={\n                isOccupied\n                  ? null\n                  : e => {\n                      if (e.key === 'Enter') {\n                        handleSelectedState(seat)\n                      }\n                    }\n              }\n            />\n          )\n        })}\n      </div>\n    </div>\n  )\n}"],"mappings":"4UAAA,MAAO,cAAc,CACrB,MAAOA,MAAK,EAAIC,QAAQ,KAAQ,OAAO,CACvC,MAAOC,KAAI,KAAM,MAAM,CACvB,MAAOC,OAAM,KAAM,sBAAsB,CACzC,OAASC,WAAW,KAAQ,kBAAkB,CAC9C,OAASC,eAAe,KAAQ,eAAe,CAC/C,OAASC,aAAa,KAAQ,aAAa,CAC3C,OAASC,UAAU,KAAQ,gBAAgB,CAAC,wFAC5C,GAAMC,EAAC,CAAE,MAAM,CACf,GAAMC,EAAC,CAAC,KAAK,CAEb,GAAMC,OAAM,CAAG,CACb,CACEC,IAAI,CAAE,SAAS,CACfC,KAAK,CAAE,EAAE,CACTC,QAAQ,CAAE,CAAC,EAAE,CAAE,EAAE,CAAE,EAAE,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAChC,CAAC,CACD,CACEF,IAAI,CAAE,OAAO,CACbC,KAAK,CAAE,EAAE,CACTC,QAAQ,CAAE,CAAC,CAAC,CAAE,EAAE,CAAE,EAAE,CAAE,EAAE,CAAE,EAAE,CAAE,EAAE,CAClC,CAAC,CACD,CACEF,IAAI,CAAE,WAAW,CACjBC,KAAK,CAAE,CAAC,CACRC,QAAQ,CAAE,CAAC,EAAE,CAAE,EAAE,CAAE,EAAE,CAAE,EAAE,CAAE,CAAC,CAAE,CAAC,CACjC,CAAC,CACD,CACEF,IAAI,CAAE,eAAe,CACrBC,KAAK,CAAE,CAAC,CACRC,QAAQ,CAAE,CAAC,EAAE,CAAE,EAAE,CAAE,EAAE,CAAE,EAAE,CAAE,EAAE,CAAE,EAAE,CACnC,CAAC,CACF,CAED,GAAMC,MAAK,CAAGC,KAAK,CAACC,IAAI,CAAC,CAAEC,MAAM,CAAE,CAAC,CAAG,CAAE,CAAC,CAAE,SAACC,CAAC,CAAEC,CAAC,QAAKA,EAAC,GAAC,CAExD,cAAe,SAASC,OAAM,EAAG,CAC7B,GAAMC,IAAG,CAAGjB,WAAW,EAAE,CAC3B,cAA0CH,QAAQ,CAACS,MAAM,CAAC,CAAC,CAAC,CAAC,wCAAtDY,aAAa,eAAEC,gBAAgB,eACtC,eAA0CtB,QAAQ,CAAC,EAAE,CAAC,yCAA/CuB,aAAa,eAAEC,gBAAgB,eACtC,eAA8BxB,QAAQ,CAAC,KAAK,CAAC,yCAAtCyB,OAAO,eAAEC,UAAU,eAC1B,eAAsC1B,QAAQ,CAAC,KAAK,CAAC,yCAA9C2B,WAAW,eAAEC,cAAc,eAElC,GAAMC,YAAW,CAAC,QAAZA,YAAW,CAAEC,CAAC,CAAG,CACrBA,CAAC,CAACC,cAAc,EAAE,CAClB,GAAMC,OAAM,CAAC,CACXC,OAAO,CAAE7B,eAAe,CACxB8B,KAAK,CAAE7B,aAAa,CACpB8B,QAAQ,CAAE7B,UAAU,CACpB8B,IAAI,CAAE7B,CAAC,CACPI,KAAK,CAAEH,CAAC,CAAC,CACX6B,OAAO,CAACC,GAAG,CAACN,MAAM,CAAC,CACnB;AACAO,KAAK,CAAC,yCAAyC,CAAE,CAC3CC,MAAM,CAAE,MAAM,CACdC,OAAO,CAAE,CAAE,cAAc,CAAE,kBAAmB,CAAC,CAC/CC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAACZ,MAAM,CAC7B,CAAC,CAAC,CACCa,IAAI,CAAC,UAAM,CACVR,OAAO,CAACC,GAAG,CAACN,MAAM,CAAC,CACnBK,OAAO,CAACC,GAAG,CAAC,gBAAgB,CAAC,CAC7BV,cAAc,CAAC,IAAI,CAAC,CACpBF,UAAU,CAAC,KAAK,CAAC,CACnB,CAAC,CAAC,CACDoB,KAAK,CAAC,UAAM,CACXT,OAAO,CAACC,GAAG,CAAC,OAAO,CAAC,CACpBZ,UAAU,CAAC,IAAI,CAAC,CAChBE,cAAc,CAAC,KAAK,CAAC,CACvB,CAAC,CAAC,CAERR,GAAG,CAAC,8BAA8B,CAAC,CACrC,CAAC,CAED,mBACE,aAAK,SAAS,CAAC,KAAK,wBAClB,KAAC,MAAM,EACL,KAAK,CAAEC,aAAc,CACrB,QAAQ,CAAE,kBAAAa,KAAK,CAAI,CACjBV,gBAAgB,CAAC,EAAE,CAAC,CACpBF,gBAAgB,CAACY,KAAK,CAAC,CACzB,CAAE,EACF,cACF,KAAC,QAAQ,IAAG,cACZ,KAAC,MAAM,EACL,KAAK,CAAEb,aAAc,CACrB,aAAa,CAAEE,aAAc,CAC7B,qBAAqB,CAAE,+BAAAA,aAAa,QAAIC,iBAAgB,CAACD,aAAa,CAAC,EAAC,EACxE,cAEF,WAAG,SAAS,CAAC,MAAM,6CACC,aAAM,SAAS,CAAC,OAAO,UAAEA,aAAa,CAACP,MAAM,EAAQ,CAAC,GAAG,0BACpD,GAAG,cAC1B,cAAM,SAAS,CAAC,OAAO,WACpBO,aAAa,CAACP,MAAM,CAAGK,aAAa,CAACV,KAAK,OACtC,GACL,cACJ,KAAC,MAAM,EAAC,OAAO,CAAC,WAAW,CAAC,OAAO,CAAEkB,WAAY,oBAExC,GACL,CAEV,CAEA,QAASkB,OAAM,MAAsB,IAAnBb,MAAK,MAALA,KAAK,CAAEc,QAAQ,MAARA,QAAQ,CAmBjC,CAlBE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGF,QAASC,SAAQ,EAAG,CAClB,mBACE,YAAI,SAAS,CAAC,UAAU,wBACtB,mCACE,aAAM,SAAS,CAAC,MAAM,EAAG,kBAAC,8BAAkB,GACzC,cACL,mCACE,aAAM,SAAS,CAAC,eAAe,EAAG,kBAAC,mCAAuB,GACvD,cACL,mCACE,aAAM,SAAS,CAAC,eAAe,EAAG,kBAAC,mCAAuB,GACvD,GACF,CAET,CAEA,QAASC,OAAM,OAAkD,IAA/ChB,MAAK,OAALA,KAAK,CAAEX,aAAa,OAAbA,aAAa,CAAE4B,qBAAqB,OAArBA,qBAAqB,CAC3D,QAASC,oBAAmB,CAAChB,IAAI,CAAE,CACjC,GAAMiB,WAAU,CAAG9B,aAAa,CAAC+B,QAAQ,CAAClB,IAAI,CAAC,CAC/C,GAAIiB,UAAU,CAAE,CACdF,qBAAqB,CACnB5B,aAAa,CAACgC,MAAM,CAAC,SAAAC,YAAY,QAAIA,aAAY,GAAKpB,IAAI,GAAC,CAC5D,CACH,CAAC,IAAM,CACLe,qBAAqB,8BAAK5B,aAAa,GAAEa,IAAI,GAAE,CACjD,CACF,CAEA,mBACE,aAAK,SAAS,CAAC,QAAQ,wBACrB,YAAK,SAAS,CAAC,QAAQ,EAAG,cAE1B,YAAK,SAAS,CAAC,OAAO,UACnBvB,KAAK,CAAC4C,GAAG,CAAC,SAAArB,IAAI,CAAI,CACjB,GAAMiB,WAAU,CAAG9B,aAAa,CAAC+B,QAAQ,CAAClB,IAAI,CAAC,CAC/C,GAAMsB,WAAU,CAAGxB,KAAK,CAACtB,QAAQ,CAAC0C,QAAQ,CAAClB,IAAI,CAAC,CAChD,mBACE,aACE,QAAQ,CAAC,GAAG,CAEZ,SAAS,CAAEnC,IAAI,CACb,MAAM,CACNoD,UAAU,EAAI,UAAU,CACxBK,UAAU,EAAI,UAAU,CACxB,CACF,OAAO,CAAEA,UAAU,CAAG,IAAI,CAAG,iBAAMN,oBAAmB,CAAChB,IAAI,CAAC,EAAC,CAC7D,UAAU,CACRsB,UAAU,CACN,IAAI,CACJ,SAAA5B,CAAC,CAAI,CACH,GAAIA,CAAC,CAAC6B,GAAG,GAAK,OAAO,CAAE,CACrBP,mBAAmB,CAAChB,IAAI,CAAC,CAC3B,CACF,CACL,EAfIA,IAAI,CAgBT,CAEN,CAAC,CAAC,EACE,GACF,CAEV"},"metadata":{},"sourceType":"module","externalDependencies":[]}