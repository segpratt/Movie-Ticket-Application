{"ast":null,"code":"import _slicedToArray from\"/Users/justin/Desktop/MEng Repos/ENSF 614/movie-ticket-system/react-frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import*as React from'react';import Box from'@mui/material/Box';import TextField from'@mui/material/TextField';import Container from'@mui/material/Container';import Paper from'@mui/material/Paper';import Button from'@mui/material/Button';import{useState,useEffect}from'react';import{Link}from'react-router-dom';import{useNavigate}from\"react-router-dom\";import{theatreSelected}from\"./Theatres.js\";import{movieSelected}from\"./Movies.js\";import{stSelected}from\"./Showtimes.js\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Seats(){var nav=useNavigate();var paperStyle={padding:'50px 20px',width:600,margin:'20px auto'};var _useState=useState([]),_useState2=_slicedToArray(_useState,2),seats=_useState2[0],setSeats=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),tId=_useState4[0],settId=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),mId=_useState6[0],setmId=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),stId=_useState8[0],setstId=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),isError=_useState10[0],setIsError=_useState10[1];var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),isSubmitted=_useState12[0],setIsSubmitted=_useState12[1];useEffect(function(){console.log(stSelected.sId);fetch(\"http://localhost:8080/api/v1/theatres/\"+theatreSelected.tId+\"/movies/\"+movieSelected.mId+\"/showtimes/\"+stSelected.sId+\"/seats\").then(function(res){return res.json();}).then(function(result){setSeats(sortByKey(JSON.parse(JSON.stringify(result)),\"id\"));});},[]);var clickHandle=function clickHandle(e,i){e.preventDefault();var seatSelected=seats[i].letter_row+seats[i].number_row;var ticket={theatre:theatreSelected.name,movie:movieSelected.name,showtime:stSelected.showtime,seat:seatSelected,price:10.00};console.log(ticket);// TODO: send data to database\nfetch(\"http://localhost:8080/api/v1/ticket/add\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(ticket)}).then(function(){console.log(ticket);console.log(\"Ticket Created\");setIsSubmitted(true);setIsError(false);nav(\"/movie-ticket-system/payment\");}).catch(function(){console.log(\"Error\");setIsError(true);setIsSubmitted(false);});};function sortByKey(array,key){return array.sort(function(a,b){var x=Number(a[key]);var y=Number(b[key]);return x<y?-1:x>y?1:0;});}return/*#__PURE__*/_jsx(Container,{children:/*#__PURE__*/_jsxs(Paper,{elevation:3,style:paperStyle,children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Seats\"}),seats.map(function(seat,i){return/*#__PURE__*/_jsx(\"div\",{children:seat.reserved?/*#__PURE__*/_jsxs(Paper,{elevation:6,style:{margin:\"10px\",padding:\"15px\",textAlign:\"left\"},children:[\"ID:\",seat.id,\", Seat:\",seat.letter_row+seat.number_row,\" \",/*#__PURE__*/_jsx(\"br\",{}),\"Status:\",seat.reserved?'Occupied':'Empty']},seat.id):/*#__PURE__*/_jsx(Link,{onClick:function onClick(e){return clickHandle(e,i);},children:/*#__PURE__*/_jsxs(Paper,{elevation:6,style:{margin:\"10px\",padding:\"15px\",textAlign:\"left\"},children:[\"ID:\",seat.id,\", Seat:\",seat.letter_row+seat.number_row,\" \",/*#__PURE__*/_jsx(\"br\",{}),\"Status:\",seat.reserved?'Occupied':'Empty']},seat.id)})});})]})});}","map":{"version":3,"names":["React","Box","TextField","Container","Paper","Button","useState","useEffect","Link","useNavigate","theatreSelected","movieSelected","stSelected","Seats","nav","paperStyle","padding","width","margin","seats","setSeats","tId","settId","mId","setmId","stId","setstId","isError","setIsError","isSubmitted","setIsSubmitted","console","log","sId","fetch","then","res","json","result","sortByKey","JSON","parse","stringify","clickHandle","e","i","preventDefault","seatSelected","letter_row","number_row","ticket","theatre","name","movie","showtime","seat","price","method","headers","body","catch","array","key","sort","a","b","x","Number","y","map","reserved","textAlign","id"],"sources":["/Users/justin/Desktop/MEng Repos/ENSF 614/movie-ticket-system/react-frontend/src/containers/Seats.js"],"sourcesContent":["import * as React from 'react';\nimport Box from '@mui/material/Box';\nimport TextField from '@mui/material/TextField';\nimport Container from '@mui/material/Container'\nimport Paper from '@mui/material/Paper'\nimport Button from '@mui/material/Button'\nimport { useState, useEffect } from 'react';\nimport { Link } from 'react-router-dom';\nimport { useNavigate } from \"react-router-dom\";\nimport { theatreSelected } from \"./Theatres.js\";\nimport { movieSelected } from \"./Movies.js\";\nimport { stSelected } from \"./Showtimes.js\";\n\nexport default function Seats() {\n  const nav = useNavigate();\n  const paperStyle = {padding:'50px 20px', width:600, margin:'20px auto'}\n  const [seats,setSeats] = useState([])\n\n  const [tId,settId] = useState('')\n  const [mId,setmId] = useState('')\n  const [stId,setstId] = useState('')\n  const [isError, setIsError] = useState(false);\n  const [isSubmitted, setIsSubmitted] = useState(false);\n\n  useEffect(()=>{\n    console.log(stSelected.sId)\n    fetch(\"http://localhost:8080/api/v1/theatres/\"+theatreSelected.tId+\"/movies/\"+movieSelected.mId+\n          \"/showtimes/\"+stSelected.sId+\"/seats\")\n    .then(res=>res.json())\n    .then(result=>{\n      setSeats(sortByKey(JSON.parse(JSON.stringify(result)), \"id\"));\n    })\n  },[])\n\n  const clickHandle = (e, i) =>{\n    e.preventDefault()\n    const seatSelected = seats[i].letter_row + seats[i].number_row\n    const ticket={\n      theatre: theatreSelected.name, \n      movie: movieSelected.name, \n      showtime: stSelected.showtime, \n      seat: seatSelected, \n      price: 10.00}\n    console.log(ticket)\n    // TODO: send data to database\n    fetch(\"http://localhost:8080/api/v1/ticket/add\", {\n          method: \"POST\",\n          headers: { \"Content-Type\": \"application/json\" },\n          body: JSON.stringify(ticket),\n        })\n          .then(() => {\n            console.log(ticket);\n            console.log(\"Ticket Created\");\n            setIsSubmitted(true);\n            setIsError(false);\n            nav(\"/movie-ticket-system/payment\");\n          })\n          .catch(() => {\n            console.log(\"Error\");\n            setIsError(true);\n            setIsSubmitted(false);\n          });\n  }\n\n  function sortByKey(array, key) {\n\t\treturn array.sort(function (a, b) {\n\t\t\tvar x = Number(a[key]);\n\t\t\tvar y = Number(b[key]);\n\t\t\treturn x < y ? -1 : x > y ? 1 : 0;\n\t\t});\n\t}\n\n  return (\n    <Container>\n      <Paper elevation={3} style={paperStyle}>\n      <h1>Seats</h1>\n      \n        {seats.map((seat,i)=>(\n          <div>\n          {seat.reserved ? (\n                <Paper elevation={6} style={{margin:\"10px\",padding:\"15px\",textAlign:\"left\"}} key={seat.id}>\n                  ID:{seat.id},\n                  Seat:{seat.letter_row+seat.number_row} <br></br>\n                  Status:{seat.reserved ? 'Occupied' : 'Empty'}\n                </Paper>\n          ) : (\n            <Link onClick={(e) => clickHandle(e, i)}>\n              <Paper elevation={6} style={{margin:\"10px\",padding:\"15px\",textAlign:\"left\"}} key={seat.id}>\n                ID:{seat.id},\n                Seat:{seat.letter_row+seat.number_row} <br></br>\n                Status:{seat.reserved ? 'Occupied' : 'Empty'}\n              </Paper>\n            </Link>\n          )}\n          </div>\n        ))}\n      </Paper>\n     \n    </Container>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}